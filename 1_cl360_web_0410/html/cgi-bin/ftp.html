        <form id="wmform">
		
		<div>
	          <table width="753"  border="0">	          	
						  <tr>
							  <td height="35" width="200" align="right"><h4>$ftp.meadcenterplt$</h4></td>
						    <td text-align: right;="left"><input type="radio" id="rd1"  name="platformsel" value="0"></input></td>	
							<td rowspan="5" align="center">
								<div id="selectnote">
						<div class="$image_prex$resetdefault" style="width: 310px;" align="left"><h6>$sysupgrade.note$</h6><font style="font-size:12px;">$ftp.notice2$</font></div>
						
							</td>
						</div>
					</div>
						  </tr>
						  <tr>
							  <td height="35" width="200" align="right" ><h4>$ftp.ftpplt$</h4></td>
						    <td text-align: right;="left"><input type="radio" id="rd2" name="platformsel" value="1"></input></td>	
							<td></td>
						  </tr>
						  <tr class="PlatformCode">
							  <td height="35" width="200" align="right" padding-right="10px"><h4>$ftp.meetplt$</h4></td>
						    <td text-align: right;="left"><input type="radio" id="rd3"  name="platformsel" value="2"></input></td>		
							<td>
							</td>
						  </tr>
						  <tr>
					  <td height="20" colspan="3" align="center"><div id="aline" style="width:580px; height:1px; background-color:#186FCA;"></div></td>
					 </tr>
					</table>
					
					
					<div id="ftpplat">
					<table width="680" border="0">
							
							<tr>
								<td height="35" align="right" class="$image_prex$itemnametd">$ftp.rmflag$</td>
								<td><input type="checkbox" name="ftprmflag" id="ftprmflag" value="1" /></td>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td height="35" align="right" class="$image_prex$itemnametd">$ftp.address$</td>
								<td><input type="text" style="padding-left:3px;" name="ftpaddress" id="ftpaddress" class="validate[required] inputtext" /></td>
								<td rowspan="5">
								
								</td>
							</tr>
							<tr>
								<td height="35" align="right" class="$image_prex$itemnametd">$ftp.port$</td>
								<td><input type="text" style="padding-left:3px;" name="thrftpport" id="thrftpport" class="validate[required, custom[integer], min[1], max[65535]] inputtext" /></td>
							</tr>
							<tr>
								<td height="35" align="right" class="$image_prex$itemnametd">$ftp.path$</td>
								<td><input type="text" style="padding-left:3px;" name="ftppath" id="ftppath" class="validate[required] inputtext" /></td>
							</tr>
							<tr>
								<td height="35" align="right" class="$image_prex$itemnametd">$ftp.username$</td>
								<td><input type="text" style="padding-left:3px;" name="ftpusername" id="ftpusername" class="validate[required] inputtext" /></td>
							</tr>
							<tr>
								<td height="35" align="right" class="$image_prex$itemnametd">$ftp.password$</td>
								<td><input type="password" style="padding-left:3px;" name="ftppassword" id="ftppassword" class="validate[required] inputtext" /></td>
							</tr>

	            <tr>
	            	<td height="35"></td>
	              <td style="text-align:left;" colspan="2">
	                <input id="checkbtn" type="button" class="btn-normal-long" onmouseover="this.className='btn-hover-long';" onmouseout="this.className='btn-normal-long';" value="$ftp.check$" />
					<input id="setbtn" type="button" class="btn-normal-long" onmouseover="this.className='btn-hover-long';" onmouseout="this.className='btn-normal-long';" value="$video.save$" />
	              </td>
	            </tr>
				</table>
				</div>
				<div id="interplat">
				<table width="753" border="0">
				<tr>
					  <td height="20" colspan="3" align="center"></td>
				 </tr>
				 
				<tr>
					<td height="45" align="right" class="$image_prex$itemnametd">$meeting.ip$</td>
					<td><input name="meetip" id="meetip" type="text" class="inputtext2 validate[custom[ipv4]]" style="padding-left:3px;" maxlength=20 size=20></input></td>					
				</tr>
				<tr>
					<td>
					</td>
					<td>
					 <input id="setipbtn" type="button" class="btn-normal-long" onmouseover="this.className='btn-hover-long';" onmouseout="this.className='btn-normal-long';" value="$video.save$" />
					 </td>
				</tr>				
	          </table>			  
			  </div>			 
			  <div id="medacentnote" align="center" style="width: 350px;color: #155E9C;">$ftp.medacent$</div>
				<table width="670" border="0">		
				<tr>
					  <td height="20" colspan="3" align="right"><div id="aline" style="width:580px; height:1px; background-color:#186FCA;"></div></td>
					  <td></td>
					 
					 </tr>
					 </table>
			 <div id="apptimer">
			  <table width="1130" border="0">		
				
				<tr>
				   <td height="35"  class="$image_prex$itemnametd" align="right">$ftp.appupload$</td>				  
				<td>					
			<input type="checkbox" name="ftptime" id="ftptimeid" value="1" />&nbsp;<input id="ftpstarttime" name="ftpstarttime" style="width:58px;height:20px;" type="text" maxlength=6 size=6 value="22:54"></input><font id="labrec">-></font><input id="ftpendtime" name="ftpendtime" style="width:58px;height:20px;" type="text" maxlength=6 size=6 value="23:54"></input>
			<input id="appftpupdate" type="button" class="$image_prex$click_btn" value="$btn.save$" style="padding-left: 0; margin-left: 0;"/>	
			</td>
			</tr>
	</table>
	</div>			
					
        </form>

<style type="text/css">
.inputtext2{
	border: 1px solid #186FCA;
    font-family: 'Lucida Grande','Hiragino Kaku Gothic ProN',Meiryo, sans-serif,Tahoma, Arial, "锟斤拷锟斤拷", Helvetica, sans-serif;
    font-size: 13px;
    height: 20px;
    line-height: 20px;
    padding: 0;
    width: 150px;
}
</style>

<script type="text/javascript">

var gnum

function validateIP(IPstr)
{
    if(IPstr.search(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/) == -1)
		return false;

    var fs = 0,ls = 0;
    var myArray = IPstr.split(/\./);

    fs = parseInt(myArray[0]);   //取第一位进行校验
    ls = parseInt(myArray[3]);  //取最后一位进行校验

    /* 主机部分不能全是1和0（第一位不能为255和0），网络部分不能全是0（最后一位不能为0和255）*/
    if((fs == 255) || (fs ==0) || (ls == 0) || (ls == 255))
    {
        return false;
    }
    return true;
}

function initCheckBox(num){
	
		jQuery('#wmform .inputtext').prop('disabled', false);
		jQuery('#wmform #checkbtn').removeAttr("disabled");
		jQuery('#ftprmflag').removeAttr("disabled");
	
		gnum = num;
	
	if(num==0)
	{
			jQuery('#ftpplat').hide();
			jQuery('#interplat').hide();
			jQuery('#aline').show();		
			jQuery('#medacentnote').show();
			jQuery('input[name=platformsel]:radio').get(0).checked=true;
	}else if(num==1)
	{
			jQuery('#ftpplat').show();
			jQuery('#interplat').hide();
			jQuery('#aline').show();	
			jQuery('#medacentnote').hide();
			jQuery('input[name=platformsel]:radio').get(1).checked=true;
	}else if(num==2)
	{
			jQuery('#ftpplat').hide();
			jQuery('#interplat').show();
			jQuery('#aline').show();	
			jQuery('#medacentnote').hide();
			jQuery('input[name=platformsel]:radio').get(2).checked=true;
	}
	
	if(verType == 0)
	{
		jQuery(".PlatformCode").show();
	}
	else if(verType == 1)
	{
		jQuery(".PlatformCode").hide();
		if(num == 2)
		{
			jQuery('#aline').hide();
			jQuery('#interplat').hide();
		}
	}
}
	
jQuery(function() {
	
	/*
	 * 初始化表单验证
	 */
	initFormValidation();
	
	/*
	 * 初始化设置和刷新按钮事件
	 */
	jQuery('#setbtn').click(function() {
		var validate = validateFormByID('wmform');
		if(validate) {
			var data = {"actioncode": "435"};
			var params = getFormItemValue('wmform');
			if(params) {
				jQuery.extend(data, params);
			}
			jQueryAjaxCmd({
				"data": data,
				success:function(ret) {
					//alert(ret);
					if(ret == 1) {
						alert('$opt.success$');
					}
				}
			});
		} else {
			return false;
		}
	});
	
	jQuery('#checkbtn').click(function() {
		var validate = validateFormByID('wmform');
		if(validate) {
			var data = {"actioncode": "450"};
			var params = getFormItemValue('wmform');
			if(params) {
				jQuery.extend(data, params);
			}
			jQueryAjaxCmd({
				"data": data,
				success:function(ret) {
					//alert(ret);
					if(ret == 6 || ret == 7 || ret == 28) {
						alert('$ftp.notice_3$');
					}else if(ret == 67) {
						alert('$ftp.notice_2$');
					}else {
						alert('$ftp.notice_1$');
					}
				}
			});
		} else {
			return false;
		}
	});

	jQuery('#setipbtn').click(function() {	
		 var ipss=document.getElementById("meetip").value;	
		 
		 if( ipss != ''){
			 var strRegex = "^([1-9]|[1-9]\\d|1\\d{2}|2[0-1]\\d|22[0-3])(\\.(\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])){3}$";
			 var re=new RegExp(strRegex);
			 if (!re.test(ipss) || !validateIP(ipss)){
				alert('$msg.invalidip$');
				return false;
			}
		}
		
		var data = {"actioncode": "460"};			
		jQuery.extend(data, {"meetip": jQuery("#meetip").attr("value")});		
		jQuery.extend(data, {"optiontype": 3});//保存参数		
		jQueryAjaxCmd({
			"data": data,			
			success:function(ret) {
				if(ret == "0") {
					alert('$opt.success$');
				}
				else if(ret == "4"){
					alert('$recordmgr.meetingerror4$');
				}
				else if(ret == "5"){
					alert('$recordmgr.meetingerror5$');
				}
				else if(ret == "6"){
					alert('$recordmgr.meetingerror6$');
				}
				else {
					alert('$opt.faild$');
				}				
			}
		});		
	});
	
	jQuery('input[name=platformsel]:radio').change(function(event){		
		var data = {"actioncode": "466"};			
		jQuery.extend(data, {"pltmod": jQuery('input[name=platformsel]:checked').val()});					
		jQueryAjaxCmd({
			"data": data,			
			success:function(ret) {
				if(ret == "0") {
					alert('$opt.success$');
					if(jQuery('input[name=platformsel]:checked').val()==0){			
						jQuery('#ftpplat').hide();
						jQuery('#interplat').hide();
						jQuery('#medacentnote').show();
						jQuery('#aline').show();			
					}
					else if(jQuery('input[name=platformsel]:checked').val()==1)
					{
						jQuery('#ftpplat').show();
						jQuery('#interplat').hide();
						jQuery('#medacentnote').hide();
						jQuery('#aline').show();	
					}else if(jQuery('input[name=platformsel]:checked').val()==2)
					{
						jQuery('#ftpplat').hide();
						jQuery('#interplat').show();
						jQuery('#medacentnote').hide();
						jQuery('#aline').show();			
					}
				}
				else if(ret == "5") {
					alert('$recordmgr.meetingerror5$');
					initCheckBox(gnum);
					return;
				}
				else if(ret == "6") {
					alert('$recordmgr.meetingerror6$');
					initCheckBox(gnum);
					return;
				}
				else if(ret == "7") {
					alert('$recordmgr.meetingerror7$');
					initCheckBox(gnum);
					return;
				}
				else if(ret == "8") {
					alert('$uploadstateerror$');
					initCheckBox(gnum);
					return;
				}
				else {
					alert('$opt.faild$');
					initCheckBox(gnum);
					return;
				}				
			}
		});	
		
		
		
	});

	jQuery("#ftpstarttime").datetimepicker({datepicker:false,format:'H:i',step:5,lang:'en',});
	jQuery("#ftpendtime").datetimepicker({datepicker:false,format:'H:i',step:5,lang:'en',});

	

		jQuery("#appftpupdate").click(function(){	
			
			var starthm=jQuery("#ftpstarttime").attr("value").split(":");
			var endhm=jQuery("#ftpendtime").attr("value").split(":");			
			if(starthm[0]>endhm[0])
			{
				alert('$recordmgr.meetingdataerror0$');
				return;
			}
			if(starthm[0]==endhm[0]){
				if(starthm[1]>endhm[1])
				{
					alert('$recordmgr.meetingdataerror0$');
					return;
				}
			}
			var data = {"actioncode": "464"};
			var params = getFormItemValue('wmform');
			if(params) {
				jQuery.extend(data, params);
			}
			var inputcheck = jQuery("#ftptimeid").attr("checked");	
			if (inputcheck == 'checked') {
				jQuery.extend(data, {"ftptimeenable": 1});
			}else{
				jQuery.extend(data, {"ftptimeenable": 0});
			}			
			jQueryAjaxCmd({			
				"data": data,
				success: function(ret) {				
					if(ret == 1) {
						alert('$opt.success$');					
					}
				}
			});		
	});
});
</script>